<!DOCTYPE html>
<html lang="en">
<head>
  <title>International Students</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
  
<div class="container">
  <div class="row">
  <div class="col-sm-6" style="background-color:white;">
  <h2>International Students</h2>
  </div>
  <div class="col-sm-6" style="background-color:white;">
  <div class="text-right">
  <ul class="pagination ">
    <li class="page-item">
      <a class="page-link" href="top10.html"><</a>
    </li>
    <li class="page-item"><a class="page-link" href="index.html">1</a></li>
    <li class="page-item"><a class="page-link" href="scatter.html">2</a></li>
    <li class="page-item"><a class="page-link" href="income.html">3</a></li>
    <li class="page-item"><a class="page-link" href="top10.html">4</a></li>
    <li class="active"><a class="page-link" href="#">5</a></li>
  </ul>
</div>
</div>
</div>
  <p>Here we see the number of inbound internationally mobile students (international students) in 2017 for countries with available data.</p>
    <p>A large portion of the increase in demand for tertiary education in high income countries has come from international students. This in part has fueled rising tertiary enrollment rates and helped universities fund their operations in the face of lower government funding.</p>
    <p>The largest destination for international students is by far the United States with almost one million students. This is followed by the United Kingdom, Australia, Germany and France.</p>           
</div>

</body>
</html>

<script src="https://d3js.org/d3.v4.js"></script>

<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<div id="international"></div>

<style>
.node:hover{
  stroke-width: 7px !important;
  opacity: 1 !important;
}

.pagination {
margin: 0px !important;
}
</style>

<script>

var margin = {top: 10, right: 10, bottom: 50, left: 50},
    width = 1200 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var svg = d3.select("#international")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + 0 + "," + 0 + ")");

d3.csv("https://raw.githubusercontent.com/ahmadaldhalaan/EdStats/master/inbound_students.csv", function(data) {

  // Possible filter
  data = data.filter(function(d){ return d.Value>0 })

  var color = d3.scaleOrdinal()
    .domain(["Latin America & Caribbean", "Europe & Central Asia", "Sub-Saharan Africa", "East Asia & Pacific", "South Asia", "Middle East & North Africa", "North America"])
    .range(d3.schemeCategory10);

  var size = d3.scaleSqrt()
    .domain([0, 1000000])
    .range([1,70])  // circle will be between 7 and 55 px wide

  var Tooltip = d3.select("#international")
    .append("div")
    .style("opacity", 0)
    .attr("class", "tooltip")
    .style("background-color", "white")
    .style("border", "solid")
    .style("border-width", "2px")
    .style("border-radius", "5px")
    .style("padding", "5px")

  var mouseover = function(d) {
    Tooltip
      .style("opacity", 1)
  }
  var mousemove = function(d) {
    Tooltip
      .html('<u>' + d.Country + '</u>' + "<br>" + d.Value + " students")
      .style("left", (d3.mouse(this)[0]+20) + "px")
      .style("top", (d3.mouse(this)[1]) + "px")
  }
  var mouseleave = function(d) {
    Tooltip
      .style("opacity", 0)
  }

  var node = svg.append("g")
    .selectAll("circle")
    .data(data)
    .enter()
    .append("circle")
      .attr("class", "node")
      .attr("r", function(d){ return size(d.Value)})
      .attr("cx", width / 2)
      .attr("cy", height / 2)
      .style("fill", function(d){ return color(d.Region)})
      .style("fill-opacity", 0.8)
      .attr("stroke", "black")
      .style("stroke-width", 1)
      .on("mouseover", mouseover) // What to do when hovered
      .on("mousemove", mousemove)
      .on("mouseleave", mouseleave)
      .call(d3.drag() // call specific function when circle is dragged
           .on("start", dragstarted)
           .on("drag", dragged)
           .on("end", dragended));

  var simulation = d3.forceSimulation()
      .force("center", d3.forceCenter().x(width / 2).y(height / 2)) // Attraction to the center of the svg area
      .force("charge", d3.forceManyBody().strength(.1)) // Nodes are attracted one each other of value is > 0
      .force("collide", d3.forceCollide().strength(.2).radius(function(d){ return (size(d.Value)+3) }).iterations(1)) // Force that avoids circle overlapping

  simulation
      .nodes(data)
      .on("tick", function(d){
        node
            .attr("cx", function(d){ return d.x; })
            .attr("cy", function(d){ return d.y; })
      });

  function dragstarted(d) {
    if (!d3.event.active) simulation.alphaTarget(.03).restart();
    d.fx = d.x;
    d.fy = d.y;
  }
  function dragged(d) {
    d.fx = d3.event.x;
    d.fy = d3.event.y;
  }
  function dragended(d) {
    if (!d3.event.active) simulation.alphaTarget(.03);
    d.fx = null;
    d.fy = null;
  }

})

</script>